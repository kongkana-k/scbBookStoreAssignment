SET DB_CLOSE_DELAY -1;        
;             
CREATE USER IF NOT EXISTS SA SALT '914991576daf452b' HASH '2f990779c75ad58f06c6948b1c5f3b853c974892ea07e8a31c79f6cb1b3db882' ADMIN;           
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_FCB5FB60_1DAB_42BA_86C9_2967B05A9236 START WITH 1 BELONGS_TO_TABLE;    
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_A9669086_8F37_44F3_BB62_2E9B3C48E906 START WITH 1 BELONGS_TO_TABLE;    
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_89F6D8A3_AED4_47A3_9AA0_A7E1743C43BC START WITH 1 BELONGS_TO_TABLE;    
CREATE MEMORY TABLE PUBLIC.BOOKS(
    ID BIGINT NOT NULL,
    AUTHOR_NAME VARCHAR(255),
    BOOK_NAME VARCHAR(255),
    PRICE INTEGER
); 
ALTER TABLE PUBLIC.BOOKS ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(ID);  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.BOOKS;   
CREATE MEMORY TABLE PUBLIC.ORDER_ITEMS(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_A9669086_8F37_44F3_BB62_2E9B3C48E906) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_A9669086_8F37_44F3_BB62_2E9B3C48E906,
    AMOUNT INTEGER,
    BOOK_ID BIGINT,
    ORDER_ID BIGINT
); 
ALTER TABLE PUBLIC.ORDER_ITEMS ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY(ID);            
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ORDER_ITEMS;             
CREATE MEMORY TABLE PUBLIC.ORDERS(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_FCB5FB60_1DAB_42BA_86C9_2967B05A9236) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_FCB5FB60_1DAB_42BA_86C9_2967B05A9236,
    TOTAL_PRICE INTEGER,
    USER_ID BIGINT
);       
ALTER TABLE PUBLIC.ORDERS ADD CONSTRAINT PUBLIC.CONSTRAINT_8 PRIMARY KEY(ID); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ORDERS;  
CREATE MEMORY TABLE PUBLIC.USERS(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_89F6D8A3_AED4_47A3_9AA0_A7E1743C43BC) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_89F6D8A3_AED4_47A3_9AA0_A7E1743C43BC,
    DATE_OF_BIRTH DATE,
    NAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    RANDOM_KEY INTEGER,
    SALT INTEGER NOT NULL,
    SURNAME VARCHAR(255),
    TOKEN VARCHAR(255),
    TOKEN_EXPIRED_TIME TIMESTAMP,
    USERNAME VARCHAR(255)
);  
ALTER TABLE PUBLIC.USERS ADD CONSTRAINT PUBLIC.CONSTRAINT_4 PRIMARY KEY(ID);  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USERS;   
ALTER TABLE PUBLIC.ORDERS ADD CONSTRAINT PUBLIC.FK32QL8UBNTJ5UH44PH9659TIIH FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USERS(ID) NOCHECK;         
ALTER TABLE PUBLIC.ORDER_ITEMS ADD CONSTRAINT PUBLIC.FKBIOXGBV59VETRXE0EJFUBEP1W FOREIGN KEY(ORDER_ID) REFERENCES PUBLIC.ORDERS(ID) NOCHECK;  
ALTER TABLE PUBLIC.ORDER_ITEMS ADD CONSTRAINT PUBLIC.FKI4PTNDSLO2PYFP9R1X0EULH9G FOREIGN KEY(BOOK_ID) REFERENCES PUBLIC.BOOKS(ID) NOCHECK;    
